name: Unit Tests  # Name of the workflow

on: [push, pull_request]   # ğŸ‘ˆ When this workflow is triggered

jobs:
  unit-tests:                    # A job is a group of steps
    runs-on: ubuntu-latest  # The virtual machine (OS) GitHub will use

    steps:
      - name: "âœ¨ Checkout repository âœ¨"
        uses: actions/checkout@v4
        # âœ… Step 1: Check out your code from GitHub so it can be used in the workflow

      - name: "ğŸ Set up Python ğŸ"
        uses: actions/setup-python@v4
        with:
          python-version: '3.11.4'
        # âœ… Step 2: Install Python version 3.11 on the runner (VM)

      - name: "ğŸ“¦ Install dependencies from requirements.txt ğŸ“¦"
        run: |
          echo "======================================"
          echo "ğŸš€ Installing dependencies... ğŸš€"
          echo "======================================"
          pip install -r requirements.txt
        # âœ… Step 3: Install all Python packages listed in requirements.txt

      - name: "ğŸ§ª Run unit tests ğŸ§ª"
        run: |
          echo "======================================"
          echo "ğŸ§ª Running unit tests... ğŸ§ª"
          echo "======================================"
          pytest
        # âœ… Step 4: Run your test suite

      - name: "ğŸ§¹ Post-test cleanup ğŸ§¹"
        run: |
          echo "======================================"
          echo "ğŸ§¹ Cleaning up after tests... ğŸ§¹"
          echo "======================================"
          rm -rf __pycache__
          rm -rf .pytest_cache
        # âœ… Step 5: Cleanup after tests
